* Manjaro工作环境配置
** 安装Manjaro系统
   按默认分区方案，比较懒。
** 换国内源
   配置国内镜源
   #+begin_src shell
     sudo pacman-mirrors -i -c China -m rank
   #+end_src
   
   设置archlinuxcn源，antergos源，arch4edu源：
   #+begin_src shell
     [archlinuxcn]
     SigLevel = TrustAll
     #中科大源
     Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
     #清华源
     Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch

     [antergos]
     SigLevel = TrustAll
     Server = https://mirrors.tuna.tsinghua.edu.cn/antergos/$repo/$arch

     [arch4edu]
     SigLevel = TrustAll
     Server = https://mirrors.tuna.tsinghua.edu.cn/arch4edu/$arch
   #+end_src
   
   更新源列表
   #+begin_src shell
     sudo pacman-mirrors -g
   #+end_src
   
   更新pacman数据库并全面更新系统
   #+begin_src shell
     sudo pacman -Syyu
   #+end_src
   
   防止PGP签名错误
   #+begin_src shell
     sudo pacman -S archlinuxcn-keyring
     sudo pacman -S antergos-keyring
   #+end_src
** 安装Google-Chrome
   #+begin_src shell
     sudo pacman -S google-chrome
   #+end_src
   
   直接开启同步功能安装好所有的插件。
** 安装qv2ray
   安装qv2ray，科学上网使用。
   #+begin_src shell
     sudo pacman -S qv2ray v2ray
     sudo pacman -S proxychains
   #+end_src
   
   proxychains代理设置，编辑 ~/etc/proxychains.conf~ 
   #+begin_src text
     socks5  127.0.0.1 1089
   #+end_src
** 安装fish shell
   安装fish shell
   #+begin_src shell
     sudo pacman -S fish
     chsh -s /usr/bin/fish

     proxychains curl -L https://get.oh-my.fish | fish

     omf install lambda
   #+end_src
   
** 安装输入法
   安装fcitx和rime输入法
   #+begin_src shell
     sudo pacman -S fcitx-im #安裝全部fcitx組件
     sudo pacman -S fcitx-rime #安裝rime
     sudo pacman -S fcitx-configtool #安裝fcitx圖形管理工具
   #+end_src
   
   编辑 ~.xprofile~ 添加如下环境变量。 
   #+begin_src text
     export GTK_IM_MODULE=fcitx
     export QT_IM_MODULE=fcitx
     export XMODIFIERS="@im=fcitx"
   #+end_src
** 存储 dotfiles
   在虚拟机中，预装好自己的Manjaro工作环境配置，进行如下操作
   #+begin_src shell
     # 初始化一个空仓库路径
     git init --bare $HOME/Manjaro-dotfiles

     # 使用别名管理dotfiles
     alias dotfiles='/usr/bin/git --git-dir=$HOME/ --work-tree=$HOME'

     # dotfiles status不显示尚未add的文件
     dotfiles config --local status.showUntrackedFiles no

     # 后续保存某些配置文件
     dotfiles add .bashrc
     dotfiles commit -m ".bashrc"
     dotfiles pusn origin master
   #+end_src

** 将dotfiles迁移到工作电脑
   #+begin_src shell
     # 设置git提交的邮箱和姓名
     git config --global user.email "devinkin@163.com"
     git config --global user.name "devinkin"

     # 设置远程仓库的配置
     ssh-keygen -t rsa

     # 避免循环checkout问题
     echo "Manjaro-dotfiles" >> ~/.gitignore

     # 将准备好的配置文件拉下来
     git clone --bare git@github.com:DevinKin/Manjaro-dotfiles.git $HOME/Manjaro-dotfiles

     # 从空仓库中将实际的配置文件拉到$HOME
     dotfiles checkout
   #+end_src

